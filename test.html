<!DOCTYPE html>
<html>
<head>
    <title>Linkvertise Link Generator</title>
    <script>
        async function generateLink() {
            const destinationUrl = document.getElementById("destinationUrl").value;
            const publisherId = 1271027; // Your publisher ID
            const apiToken = "78c75300d136aa56a1a9397db5137b215c8b361c919ae870dacd29c41de3aacd"; // Your API token

            if (!destinationUrl) {
                alert("Please enter a destination URL.");
                return;
            }

            try {
                const response = await fetch(`https://api.linkvertise.com/v1/links`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${apiToken}`
                    },
                    body: JSON.stringify({
                        url: destinationUrl,
                        // Add other linkvertise settings here if needed. For example:
                        // target: "_blank",
                        // premium: true, // If you want to create a premium link
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json(); // Try to get error details
                    throw new Error(`API Error: ${response.status} - ${errorData.message || response.statusText}`);
                }

                const data = await response.json();
                const linkvertiseLink = data.url;

                document.getElementById("result").innerHTML = `<a href="${linkvertiseLink}" target="_blank">${linkvertiseLink}</a>`;
                document.getElementById("shortenedLink").value = linkvertiseLink; // For copying

            } catch (error) {
                console.error("Error generating link:", error);
                alert("An error occurred: " + error.message);
            }
        }

        function copyLink() {
            const shortenedLink = document.getElementById("shortenedLink");
            shortenedLink.select();
            shortenedLink.setSelectionRange(0, 99999); /* For mobile devices */
            navigator.clipboard.writeText(shortenedLink.value);
            alert("Link copied to clipboard!");
        }
    </script>
</head>
<body>

    <h1>Linkvertise Link Generator</h1>

    <label for="destinationUrl">Destination URL:</label>
    <input type="url" id="destinationUrl" placeholder="Enter the URL you want to shorten"><br><br>

    <button onclick="generateLink()">Generate Link</button><br><br>

    <div id="result"></div> <br>

    <input type="text" id="shortenedLink" readonly>
    <button onclick="copyLink()">Copy Link</button>

</body>
</html>
